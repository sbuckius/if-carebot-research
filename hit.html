<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>HIT Task Launcher</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
      :root {
        --bg1: #ffc0cb;
        --bg2: #ffb6c1;
        --bg3: #ff69b4;
        --maroon: #800000;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        background: linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
        background-size: 400% 400%;
        animation: gradientShift 8s ease infinite;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      /* Fullscreen layout that respects iPhone safe areas */
      .screen {
        position: fixed;
        inset: 0;
        padding: env(safe-area-inset-top) env(safe-area-inset-right)
                 env(safe-area-inset-bottom) env(safe-area-inset-left);
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* Centered column content */
      .stack {
        width: min(92vw, 720px);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: clamp(16px, 4vh, 32px);
        text-align: center;
        z-index: 2; /* above the canvas */
      }

      h1 {
        margin: 0;
        color: var(--maroon);
        font-weight: 600;
        /* Fluid type that shrinks on iPhone */
        font-size: clamp(18px, 6vw, 32px);
        line-height: 1.2;
      }

      /* Big comfy button for easy tapping */
      .cta {
        appearance: none;
        border: none;
        border-radius: 18px;
        color: #fff;
        background: linear-gradient(135deg, #b30059, #cc0066, #993366);
        box-shadow: 0 10px 24px rgba(128, 0, 64, 0.28);
        cursor: pointer;
        /* Large hit area that scales with screen width */
        font-size: clamp(16px, 5vw, 22px);
        padding: clamp(14px, 3.5vh, 18px) clamp(28px, 8vw, 36px);
        min-width: 56%;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
        transition: transform 0.08s ease, box-shadow 0.2s ease, background 0.3s ease;
      }
      .cta:focus-visible {
        outline: 3px solid #fce4ef;
        outline-offset: 3px;
      }
      .cta:hover {
        background: linear-gradient(90deg, #b30059, #d147a3);
      }
      .cta:active {
        transform: translateY(1px) scale(0.99);
        box-shadow: 0 6px 18px rgba(128, 0, 64, 0.25);
      }

      /* Put canvas behind everything and never intercept touches */
      canvas {
        position: fixed !important;
        inset: 0;
        z-index: 0;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <div class="screen">
      <div class="stack" role="main">
        <h1>Click the button to begin your HIT (human intelligence task)</h1>
        <button id="startBtn" class="cta" aria-label="Begin Task">
          ðŸ’— Begin Task ðŸ’—
        </button>
      </div>
    </div>

    <script>
      // Links to choose from
      const links = [
        "harlow-shapley.html",
        "katharine-johnson-nasa-work.html",
        "woman-as-inventor-work.html",
        "game-1-biased-image.html",
        "direct-robot-1.html",
        "humancomputers.html"
      ];

      // p5 background canvas (kept only for visual flair)
      function setup() {
        const c = createCanvas(windowWidth, windowHeight);
        noLoop();
        drawBg();
      }

      function windowResized() {
        resizeCanvas(windowWidth, windowHeight);
        drawBg();
      }

      function drawBg() {
        // Optional: soft vignette so the centered content pops a bit
        clear(); // canvas is behind; avoid drawing text here
        const g = drawingContext.createRadialGradient(
          width/2, height/2, min(width, height)*0.1,
          width/2, height/2, max(width, height)*0.7
        );
        g.addColorStop(0, "rgba(255,255,255,0.08)");
        g.addColorStop(1, "rgba(0,0,0,0.10)");
        drawingContext.fillStyle = g;
        noStroke();
        rect(0, 0, width, height);
      }

      // Reliable button interactions (click + keyboard)
      const startBtn = document.getElementById("startBtn");
      function goToRandomLink() {
        const idx = Math.floor(Math.random() * links.length);
        // Use location.assign for iOS reliability
        window.location.assign(links[idx]);
      }
      startBtn.addEventListener("click", goToRandomLink);
      startBtn.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          goToRandomLink();
        }
      });
    </script>
  </body>
</html>
